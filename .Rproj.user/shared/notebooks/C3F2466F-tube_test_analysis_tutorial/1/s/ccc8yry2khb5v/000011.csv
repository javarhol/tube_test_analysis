"0","#make a custom function that formats the table into a win-loss matrix and then runs the ds function."
"0","get_ds <- function(x){"
"0","  matrix <- get_wl_matrix(x, ties=""keep"")"
"0","  david_scores <- as.data.frame(ds(matrix, norm=FALSE, type = ""D""))"
"0","}"
"0",""
"0","#get david scores for each item in the list"
"0","ds_per_week <- do.call(rbind, lapply(day_list, get_ds))"
"0",""
"0","#tidy data"
"0","ds_per_week <- ds_per_week %>% "
"0","  rename(ds = `ds(matrix, norm = FALSE, type = ""D"")`) %>% "
"0","  mutate(cage_day = rownames(.)) %>% "
"0","  separate_wider_delim(cage_day, delim = ""."", names = c(""cage_day"", ""animal_id"")) %>% "
"0","  separate_wider_delim(cage_day, delim = ""-"", names = c(""cage_id"", ""day"")) %>% "
"0","  select(cage_id, animal_id, day, ds)"
"0",""
"0","write.csv(ds_per_week, ""data/ds_per_week.csv"")"
"0",""
"0","head(ds_per_week)"
