"0","get_MinRank <- function(x){"
"0","  matrix <- get_wl_matrix(x, ties=""keep"")"
"0","  wins <- rowSums(matrix)"
"0","  total_wins <- as.data.frame(wins)"
"0","  total_wins$ID <- rownames(total_wins)"
"0","  total_wins <- mutate(total_wins, rank = rank(-wins, ties.method=""min""))"
"0","  total_wins <- select(total_wins, ID, wins, rank)"
"0","  return(total_wins)"
"0","}"
"0",""
"0","#ranks per week"
"0","ranks_per_week <- do.call(rbind, lapply(day_list, get_MinRank))"
"0","#tidy"
"0","ranks_per_week <- ranks_per_week %>% "
"0","  mutate(cage_day = rownames(.)) %>% "
"0","  separate_wider_delim(cage_day, delim = ""."", names = c(""cage_day"", ""animal_id"")) %>% "
"0","  separate_wider_delim(cage_day, delim = ""-"", names = c(""cage_id"", ""day"")) %>% "
"0","  select(cage_id, animal_id, day, wins, rank)"
"0","write.csv(ranks_per_week, ""data/ranks_per_week.csv"")"
"0",""
"0","#ranks per cage"
"0","ranks_per_cage <- do.call(rbind, lapply(cage_list, get_MinRank))"
"0","#tidy"
"0","ranks_per_cage <- ranks_per_cage %>% "
"0","  mutate(tempid = rownames(.)) %>% "
"0","  separate_wider_delim(tempid, delim = ""."", names = c(""cage_id"", ""animal_id"")) %>% "
"0","  select(cage_id, animal_id, wins, rank)"
"0","write.csv(ranks_per_cage, ""data/ranks_per_cage.csv"")"
